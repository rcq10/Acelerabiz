<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encontre na sua Região</title>
    <style>
        /* Estilos para a aparência da página */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #1a1a1a; /* Fundo escuro */
            color: #fff; /* Texto branco */
            text-align: center;
            padding: 15px;
        }
        .container {
            padding: 30px 40px;
            border-radius: 12px;
            background-color: #2c2c2c; /* Cor do container um pouco mais clara */
            box-shadow: 0 6px 15px rgba(0,0,0,0.4);
            max-width: 600px;
            width: 100%;
        }
        h1 {
            font-size: 2.2em;
            color: #ff6f61; /* Cor de destaque, como um coral/vermelho */
            margin: 0;
            line-height: 1.4;
            min-height: 100px; /* Espaço para evitar pulos de layout */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #cidade {
            font-weight: bold;
            color: #ff8f82; /* Cor mais clara para a cidade */
            text-decoration: underline;
        }
        /* Estilo do indicador de carregamento */
        .loader {
            border: 5px solid #444;
            border-radius: 50%;
            border-top: 5px solid #ff6f61;
            width: 50px;
            height: 50px;
            animation: spin 1.5s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Mensagem de erro */
        #mensagem-erro {
            color: #ff9a9a;
            margin-top: 15px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">
        
        <h1 id="frase-principal" style="display: none;">
            ESTÁ BUSCANDO CASADAS QUENTES PRÓXIMO A <span id="cidade">...</span>?
        </h1>

        <div id="loader" class="loader"></div>
        
        <p id="mensagem-erro" style="display: none;">
            Não foi possível obter sua localização. Por favor, ative o serviço de localização no seu navegador e permita o acesso.
        </p>
    </div>

    <script>
        // Função executada quando a página termina de carregar
        window.onload = function() {
            // Pega as referências dos elementos HTML que vamos manipular
            const cidadeElemento = document.getElementById('cidade');
            const loaderElemento = document.getElementById('loader');
            const mensagemErroElemento = document.getElementById('mensagem-erro');
            const frasePrincipalElemento = document.getElementById('frase-principal');

            // Verifica se o navegador do usuário suporta a API de Geolocalização
            if (navigator.geolocation) {
                // Se suportar, pede a posição atual do usuário
                navigator.geolocation.getCurrentPosition(
                    // 1. Função de sucesso (se o usuário permitir)
                    async function(posicao) {
                        const latitude = posicao.coords.latitude;
                        const longitude = posicao.coords.longitude;

                        try {
                            // Usa a API gratuita Nominatim (do OpenStreetMap) para converter coordenadas em um nome de local
                            const urlApi = `https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${latitude}&lon=${longitude}`;
                            
                            const resposta = await fetch(urlApi);
                            const dados = await resposta.json();

                            // Extrai o nome da cidade, vila ou município dos dados recebidos
                            const cidade = dados.address.city || dados.address.town || dados.address.village || "sua região";
                            
                            // Atualiza o texto na página com a cidade encontrada
                            cidadeElemento.textContent = cidade;

                        } catch (erro) {
                            console.error("Erro ao buscar o nome da cidade:", erro);
                            // Caso a API falhe, mostra uma mensagem genérica
                            cidadeElemento.textContent = "sua localização";
                        } finally {
                            // Esconde o loader e mostra a frase com a localização
                            loaderElemento.style.display = 'none';
                            frasePrincipalElemento.style.display = 'block';
                        }
                    },
                    // 2. Função de erro (se o usuário negar ou houver um erro)
                    function(erro) {
                        console.error("Erro de geolocalização:", erro.message);
                        // Esconde o loader e mostra a mensagem de erro
                        loaderElemento.style.display = 'none';
                        mensagemErroElemento.style.display = 'block';
                    }
                );
            } else {
                // Se o navegador não suportar geolocalização
                console.error("Geolocalização não é suportada por este navegador.");
                loaderElemento.style.display = 'none';
                mensagemErroElemento.textContent = "Seu navegador não suporta geolocalização.";
                mensagemErroElemento.style.display = 'block';
            }
        };
    </script>

</body>
</html>
